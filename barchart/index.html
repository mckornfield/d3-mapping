<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Following http://duspviz.mit.edu/d3-workshop/intro-to-d3/ -->
    <title>i'm learning d3</title>
    <script src="https://d3js.org/d3.v4.js" charset="utf-8"></script>
    <style>
        text {
            font-family: "Open Sans", sans-serif;
            font-size: 12px;
        }
    </style>
</head>

<body>
    <script>
        const ratData = [40, 70, 60, 20, 40, 100, 60];
        const maxValue = d3.max(ratData, d => +d)
        const x_axisLength = 100;
        const y_axisLength = 100;
        const yScale = d3.scaleLinear()
            .domain([0, maxValue])
            .range([0, y_axisLength])
        const w = 150;
        const h = 175;
        const start = 30;

        // Create SVG
        const svg = d3.selectAll("body")
            .append("svg")
            .attr("width", w)
            .attr("height", h)

        svg.selectAll("rect")
            .data(ratData)
            .enter()
            .append("rect")
            .attr("x", (d, i) => i * (x_axisLength / ratData.length) + start)
            .attr("y", d => h - yScale(d)) // From the bottom instead
            .attr("width", (x_axisLength / ratData.length) - 1)
            .attr("height", d => yScale(d))
            .attr("fill", "darkslategray")

        svg.append('line')
            .attr('x1', start)
            .attr('y1', 75)
            .attr('x2', start)
            .attr('y2', h)
            .attr('stroke-width', 2)
            .attr('stroke', 'black')

        svg.append('line')
            .attr('x1', start)
            .attr('y1', h)
            .attr('x2', x_axisLength)
            .attr('y2', h)
            .attr('stroke-width', 2)
            .attr('stroke', 'black')

        svg.append('text')
            .attr('class', 'y label')
            .attr('text-anchor', 'end')
            .text('Number of Rats')
            .attr('transform', 'translate(20,80) rotate(-90)')
    </script>
</body>

</html>
